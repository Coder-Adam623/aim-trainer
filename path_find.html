<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Path Measure Tool</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
            background: #111;
            font-family: monospace;
            color: white;
        }

        #canvas {
            width: 100vw;
            height: 100vh;
            display: block;
        }

        #info {
            position: fixed;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.5);
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 18px;
            pointer-events: none;
        }
    </style>
</head>
<body>

<canvas id="canvas"></canvas>
<div id="info">Click anywhere, then press 1 or 2.</div>

<script>
// Match your Phaser internal resolution
const GAME_WIDTH = 1280;
const GAME_HEIGHT = 720;

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

// Internal resolution (Phaser logic resolution)
canvas.width = GAME_WIDTH;
canvas.height = GAME_HEIGHT;

// Background image (use same as your real game)
const bg = new Image();
bg.src = "assets/bg.png"; // change to your real path

let lastMouse = { x: 0, y: 0 };
let pos1 = null;
let pos2 = null;

// Convert mouse to Phaser coordinates
function getMousePos(e) {
    const rect = canvas.getBoundingClientRect();
    const scaleX = GAME_WIDTH / rect.width;
    const scaleY = GAME_HEIGHT / rect.height;

    return {
        x: (e.clientX - rect.left) * scaleX,
        y: (e.clientY - rect.top) * scaleY
    };
}

// Track mouse
canvas.addEventListener("mousemove", e => {
    lastMouse = getMousePos(e);
});

// Draw crosshair
function drawCrosshair(x, y, color = "red") {
    ctx.strokeStyle = color;
    ctx.beginPath();
    ctx.moveTo(x - 10, y);
    ctx.lineTo(x + 10, y);
    ctx.moveTo(x, y - 10);
    ctx.lineTo(x, y + 10);
    ctx.stroke();
}

// Save positions
document.addEventListener("keydown", e => {
    if (e.key === "1") {
        pos1 = { ...lastMouse };
        console.log("Pos1:", pos1);
        updateDisplay();
    }
    if (e.key === "2") {
        pos2 = { ...lastMouse };
        console.log("Pos2:", pos2);
        updateDisplay();
    }
});

// Update UI text
function updateDisplay() {
    let text = "Click anywhere, then press 1 or 2.<br><br>";
    if (pos1) text += `Pos1: (${Math.round(pos1.x)}, ${Math.round(pos1.y)})<br>`;
    if (pos2) text += `Pos2: (${Math.round(pos2.x)}, ${Math.round(pos2.y)})<br>`;
    document.getElementById("info").innerHTML = text;
}

// Render loop
function loop() {
    ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);

    if (bg.complete) {
        ctx.drawImage(bg, 0, 0, GAME_WIDTH, GAME_HEIGHT);
    }

    if (pos1) drawCrosshair(pos1.x, pos1.y, "yellow");
    if (pos2) drawCrosshair(pos2.x, pos2.y, "cyan");

    drawCrosshair(lastMouse.x, lastMouse.y, "red");

    requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
